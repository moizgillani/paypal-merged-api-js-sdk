/**
 * Merged ApiLib
 *
 * This file was automatically generated by APIMATIC v3.0 ( https://www.apimatic.io ).
 */

import { lazy, object, optional, Schema, string } from '../schema';
import {
  AdditionalPaymentInstruction,
  additionalPaymentInstructionSchema,
} from './additionalPaymentInstruction';
import { Money, moneySchema } from './money';

/** Refunds a captured payment, by ID. For a full refund, include an empty request body. For a partial refund, include an <code>amount</code> object in the request body. */
export interface RefundRequest {
  /** The amount to refund. To refund a portion of the captured amount, specify an amount. If amount is not specified, an amount equal to <code>captured amount - previous refunds</code> is refunded. The amount must be a positive number and in the same currency as the one in which the payment was captured. */
  amount?: Money;
  /** The API caller-provided external ID. Used to reconcile API caller-initiated transactions with PayPal transactions. Appears in transaction and settlement reports. The pattern is defined by an external party and supports Unicode. */
  customId?: string;
  /** The API caller-provided external invoice ID for this order. The pattern is defined by an external party and supports Unicode. */
  invoiceId?: string;
  /** The reason for the refund. Appears in both the payer's transaction history and the emails that the payer receives. The pattern is defined by an external party and supports Unicode. */
  noteToPayer?: string;
  /** Any additional refund instructions to be set during refund payment processing. This object is only applicable to merchants that have been enabled for PayPal Commerce Platform for Marketplaces and Platforms capability. Please speak to your account manager if you want to use this capability. */
  paymentInstruction?: AdditionalPaymentInstruction;
}

export const refundRequestSchema: Schema<RefundRequest> = object({
  amount: ['amount', optional(lazy(() => moneySchema))],
  customId: ['custom_id', optional(string())],
  invoiceId: ['invoice_id', optional(string())],
  noteToPayer: ['note_to_payer', optional(string())],
  paymentInstruction: [
    'payment_instruction',
    optional(lazy(() => additionalPaymentInstructionSchema)),
  ],
});
