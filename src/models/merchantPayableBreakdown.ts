/**
 * Paypal Merged APILib
 *
 * This file was automatically generated by APIMATIC v3.0 ( https://www.apimatic.io ).
 */

import { array, lazy, object, optional, Schema } from '../schema';
import { Money, moneySchema } from './money';
import {
  NetAmountBreakdownItem,
  netAmountBreakdownItemSchema,
} from './netAmountBreakdownItem';
import { PlatformFee, platformFeeSchema } from './platformFee';

/** The breakdown of the refund. */
export interface MerchantPayableBreakdown {
  /** The amount that the payee refunded to the payer. */
  grossAmount?: Money;
  /** The PayPal fee that was refunded to the payer in the currency of the transaction. This fee might not match the PayPal fee that the payee paid when the payment was captured. */
  paypalFee?: Money;
  /** The PayPal fee that was refunded to the payer in the receivable currency. Returned only in cases when the receivable currency is different from transaction currency. Example 'CNY'. */
  paypalFeeInReceivableCurrency?: Money;
  /** The net amount that the payee's account is debited in the transaction currency. The net amount is calculated as <code>gross_amount</code> minus <code>paypal_fee</code> minus <code>platform_fees</code>. */
  netAmount?: Money;
  /** The net amount that the payee's account is debited in the receivable currency. Returned only in cases when the receivable currency is different from transaction currency. Example 'CNY'. */
  netAmountInReceivableCurrency?: Money;
  /** An array of platform or partner fees, commissions, or brokerage fees for the refund. */
  platformFees?: PlatformFee[];
  /** An array of breakdown values for the net amount. Returned when the currency of the refund is different from the currency of the PayPal account where the payee holds their funds. */
  netAmountBreakdown?: NetAmountBreakdownItem[];
  /** The total amount refunded from the original capture to date. For example, if a payer makes a $100 purchase and was refunded $20 a week ago and was refunded $30 in this refund, the `gross_amount` is $30 for this refund and the `total_refunded_amount` is $50. */
  totalRefundedAmount?: Money;
}

export const merchantPayableBreakdownSchema: Schema<MerchantPayableBreakdown> = object(
  {
    grossAmount: ['gross_amount', optional(lazy(() => moneySchema))],
    paypalFee: ['paypal_fee', optional(lazy(() => moneySchema))],
    paypalFeeInReceivableCurrency: [
      'paypal_fee_in_receivable_currency',
      optional(lazy(() => moneySchema)),
    ],
    netAmount: ['net_amount', optional(lazy(() => moneySchema))],
    netAmountInReceivableCurrency: [
      'net_amount_in_receivable_currency',
      optional(lazy(() => moneySchema)),
    ],
    platformFees: [
      'platform_fees',
      optional(array(lazy(() => platformFeeSchema))),
    ],
    netAmountBreakdown: [
      'net_amount_breakdown',
      optional(array(lazy(() => netAmountBreakdownItemSchema))),
    ],
    totalRefundedAmount: [
      'total_refunded_amount',
      optional(lazy(() => moneySchema)),
    ],
  }
);
